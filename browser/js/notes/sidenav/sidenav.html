<div id="sidenav" class="col-sm-12" ng-class="{'col-lg-4 col-md-4': isSideNavOpen(), 'col-lg-1 col-md-1': !isSideNavOpen()}" ng-controller="SidenavCtrl">
	<div class="pull-right">
		<button type="button" id="togglesidenav" class="btn btn-default" data-toggle="tooltip" data-placement="right" ng-attr-title="isSideNavOpen() ? 'Hide Notes Navigator' : 'Show Notes Navigator'" ng-click="toggleSideNav()"><i class="glyphicon" ng-class="{'glyphicon-arrow-left' : isSideNavOpen(), 'glyphicon-arrow-right' : !isSideNavOpen()}"></i></button>
	</div>

	<ul class="nav nav-pills nav-justified nav-pills-sm nav-pills-purple" ng-if="isSideNavOpen()">
		<li class="active"><a href="#notes" data-toggle="tab"><i class="fa fa-sticky-note-o"></i></a>
		</li>
		<li > <a href="#notebooks" data-toggle="tab" aria-expanded="true"><i class="fa fa-book"></i></a>
		</li>
		<li><a href="#tags" data-toggle="tab"><i class="fa fa-tags"></i></a>
		</li>
		<li><a href="#shared" data-toggle="tab"><i class="fa fa-share-alt"></i></a>
		</li>
		<li class="last"><a href="#trash" data-toggle="tab"><i class="fa fa-trash-o"></i></a>
		</li>
	</ul> <!-- ./nav -->
	<div class="tab-content" ng-if="isSideNavOpen()">
		<div class="tab-pane fade in active" id="notes">
			<div class="dropdown">
				<a class="dropdown-toggle" data-toggle="dropdown" href="#" ng-click="getNotebooks()">
					<button type="button" class="btn align-right"  data-toggle="tooltip" title="Add a note">
							<i class="fa fa-plus"></i><i class="fa fa-sticky-note-o"></i>
					</button>
				</a>
				<ul class="dropdown-menu dropdown-messages">
					<li ng-repeat="notebook in notebooks">
						<a ng-click="createNote(notebook)">Add a note to "{{notebook.title}}"</a>
					</li>
				</ul> <!-- /.dropdown-messages -->
			</div> <!-- /.dropdown -->
			<input ng-model="searchNotes" width="25" type="text" class="form-control" placeholder="Search Notes">
			<div class="outer-scroll">
				<div class='list-group' id="side-menu-1">
						<a ng-click="setCurrentNote(note)"  class="list-group-item" ng-repeat="note in getnotes() | filter:searchNotes | filter: {trash: false} | orderBy: '-lastUpdate'">{{note.subject}}</a>
				</div>
			</div>
		</div>
		<div class="tab-pane fade" id="notebooks">

	    	<div class="dropdown">
				<a class="dropdown-toggle" data-toggle="dropdown">
					<button type="button" class="btn align-right"  data-toggle="tooltip" title="Add a notebook">
						<i class="fa fa-plus"></i><i class="fa fa-book"></i>
					</button>
				</a>
				<ul class="dropdown-menu dropdown-messages">
					<li>
						<div class="input-group">
							<form ng-submit="createNotebook(notebookTitle)">
								<input id="notebook" type="text" ng-model="notebookTitle" placeholder="Enter notebook title">
								<button class="btn btn-small btn-default" data-toggle="tooltip" title="Save Notebook" type="submit"><i class="fa fa-save"></i></button>
							</form>
						</div>
					</li>
				</ul> <!-- /.dropdown-messages -->
			</div> <!-- /.dropdown -->	
			<input ng-model="searchNotebooktitle" width="25" type="text" class="form-control" placeholder="Search Notebooks">
			<div class="outer-scroll">
				<div class="list-group" id="side-menu-2">   						
					
					<div ng-repeat="notebook in getCachedNotebooks() | filter:{title: searchNotebooktitle} | filter: {trash: false} | orderBy: '-date'">

						<a data-toggle="collapse" ng-href="#{{notebook._id}}" class="list-group-item clearfix" ng-click="setCurrentNotebook(notebook)"> {{notebook.title}} 

							<i data-toggle="modal" data-target="#trashNotebook{{notebook._id}}" data-toggle="tooltip" title="Trash notebook" class="fa fa-trash-o pull-right margin-left"></i> 

							<i data-toggle="modal" data-target="#shareNotebook{{notebook._id}}" class="pull-right fa fa-share-alt"  data-toggle="tooltip" title="Share notebook"></i>

					    </a>


				<!-- Delete Popup -->
				<div class="trash-modal">
	 				<div id="trashNotebook{{notebook._id}}" class="modal fade" role="dialog">
					  <div class="modal-dialog">
					    <div class="modal-content">
					      <div class="modal-body">
							<div class="input-group" id="delete-notebook-confirmation"> 
								<i class="fa fa-check" title="Confirm delete" ng-click="trashNotebook(notebook)" data-dismiss="modal"></i>
						        <i class="fa fa-trash-o"></i>
						        <i class="fa fa-times" title="Cancel delete" data-dismiss="modal"></i>
							</div>
					      </div>
					    </div>
					  </div>
					</div>
				</div>
				<!-- Closing Delete Popup -->



				<!-- Share Popup -->
				<div id="shareNotebook{{notebook._id}}" class="modal fade" role="dialog">
					<div class="modal-dialog">

					<!-- Share Popup content-->
					<div class="modal-content share-modal">
<!-- 						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">&times;</button>
							<h4 class="modal-title">Manage Sharing</h4>
						</div> -->
							<div class="modal-body">

								<form ng-submit="shareNotebook(notebook, shareEmail)">
									 <div class="input-group"> 
									<input ng-model="shareEmail" type="text" class="form-control" placeholder="Add friend's email to share or remove share"> 
									<i ng-click="shareNotebook(notebook, shareEmail)" class="fa fa-share-alt" data-dismiss="modal"></i> 
									<i ng-click="removeNotebookShare(notebook, shareEmail)" class="fa fa-times" data-dismiss="modal"></i> 
									</div>
								</form>	

							<div class="alert alert-error" role="alert" ng-if="errormessage">{{errormessage}}</div>


							</div>
						<!--       <div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						</div> -->
						</div>
					</div>
				</div>
	
							<div class="collapse" id="{{notebook._id}}">	
								<div class="panel-body inner-scroll">
									<div class="list-group">
										<a ng-click="setCurrentNote(oneNote,notebook)" class="list-group-item" ng-repeat="oneNote in notebook.notes| filter:{trash: false} | orderBy: '-lastUpdate'" >{{oneNote.subject}}
										</a>
									</div>
								</div>
							</div>


						</div>
					</div>
				<!-- </div> -->
			</div>
		</div>
		<div class="tab-pane fade" id="tags">
				<div class="outer-scroll">
					<div class="list-group" id="side-menu-3">
						<div ng-repeat="tag in getTagsCache()">
							<a ng-href="#{{tag.tag}}" data-toggle="collapse" class="list-group-item" ng-click="setTag(tag)"><span>{{tag.tag}} </span> <span class="pull-right">{{tag.count}} notes</span></a>
							<div class="panel-collapse collapse" id="{{tag.tag}}">
								<div class="panel-body inner-scroll">
									<div class="list-group">
										<a ng-click="setCurrentNote(note)" class="list-group-item" ng-repeat="note in getnotes() | filterByTag: filters[tag.tag]: note">{{note.subject}}</a>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
		</div>

		<div class="tab-pane fade" id="shared">
					<input ng-model="searchSharedNotebooktitle" width="25" type="text" class="form-control" placeholder="Search Shared Notebooks">
				<div class="outer-scroll">
					<div class="list-group" id="side-menu-4">
						<div ng-repeat="sharednotebook in sharednotebooks | filter:{title: searchSharedNotebooktitle} | filter: {trash: false}">
							<a data-toggle="collapse" ng-href="#{{sharednotebook._id}}" class="list-group-item">{{sharednotebook.title}}</a>
							<div class="panel-collapse collapse" id="{{sharednotebook._id}}">
								<div class="panel-body inner-scroll">
									<div class="list-group">
										<a ng-click="setCurrentNote(oneNote,sharednotebook)" class="list-group-item" ng-repeat="oneNote in sharednotebook.notes">{{oneNote.subject}}
										</a>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
		</div>

		<div class="tab-pane fade" id="trash">
					<input ng-model="searchNotebooks" width="25" type="text" class="form-control" placeholder="Search Notebooks in Trash">
				<div class="trash-scroll">
					<div class="list-group" id="side-menu-5">
						<div ng-repeat="notebook in getCachedNotebooks() | filter:searchNotebooks | filter: {trash: true}" > <!-- check trash logic ? -->
							<a data-toggle="collapse" ng-href="#trash-{{notebook._id}}" class="list-group-item" ng-click="setCurrentNotebook(notebook)">{{notebook.title}}
								&nbsp; &nbsp; &nbsp;
						        <i ng-click="deleteNotebook(notebook)" type="button" class="fa fa-trash-o pull-right margin-left"  data-toggle="tooltip" title="Delete notebook">
								</i>
								&nbsp; &nbsp; &nbsp;
						        <i ng-click="restoreNotebook(notebook)" type="button" class="fa fa-check-circle pull-right margin-left" data-toggle="tooltip" title="Restore notebook">
								</i>

							</a>

							<div class="panel-collapse collapse" id="trash-{{notebook._id}}">
								<div class="panel-body inner-scroll">
									<div class="list-group">
										<a ng-click="setCurrentNote(oneNote,notebook)" class="list-group-item" ng-repeat="oneNote in notebook.notes">{{oneNote.subject}}
										</a>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			<!-- </div> -->
			<div class="panel panel-default">
				<div class="panel-heading">
					<input ng-model="searchNotes" width="25" type="text" class="form-control" placeholder="Search Notes In Trash">

				</div>
					<div class="panel-body inner-scroll">
					<div class='list-group' id="side-menu-1">
							<a class="list-group-item" ng-repeat="note in getnotes() | filter: searchNotes | filter: {trash: true}" ng-click="setCurrentNote(note)">{{note.subject}}

								&nbsp; &nbsp; &nbsp;
						        <i ng-click="deleteNote(note)" ng-if="note.trash" type="button" class="fa fa-trash-o pull-right  margin-left"  data-toggle="tooltip" title="Delete note">
								</i>
								&nbsp; &nbsp; &nbsp;
						        <i ng-click="restoreNote(note._id)" ng-if="note.trash" type="button" class="fa fa-check-circle pull-right"  data-toggle="tooltip" title="Restore note">
								</i>


							</a>
					</div>
				</div>
			</div>			
		</div>
	</div>


	<!-- 	<div class="form-inline" ng-if="isSideNavOpen()">

		</div> -->
</div> 


