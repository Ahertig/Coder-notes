<div id="sidenav" class="col-sm-12" ng-class="{'col-lg-4 col-md-4': isSideNavOpen(), 'col-lg-1 col-md-1': !isSideNavOpen()}" ng-controller="SidenavCtrl">
	<!-- <div class="panel panel-default" id="addnoteandnotebook" ng-if="isSideNavOpen()"> -->
		<!-- <div class="panel-body"> -->
		<!-- </div> ./panel body outer -->
	<!-- </div> ./panel panel default outer				 -->
<!-- 	<div class="panel panel-default">
		<div id="mystuffheading" class="panel-heading"><span ng-show="isSideNavOpen()">My Stuff</span>
 -->			<div class="pull-right">
				<button type="button" id="togglesidenav" width="50%" class="btn btn-default" data-toggle="tooltip" data-placement="right" ng-attr-title="isSideNavOpen() ? 'Hide Notes Navigator' : 'Show Notes Navigator'" ng-click="toggleSideNav()"><i class="glyphicon" ng-class="{'glyphicon-arrow-left' : isSideNavOpen(), 'glyphicon-arrow-right' : !isSideNavOpen()}"></i></button>
			<!-- </div> -->
		</div>
		<!-- <div class="panel-body" ng-if="isSideNavOpen()"> -->
			<ul class="nav nav-pills nav-justified nav-pills-sm nav-pills-purple" ng-if="isSideNavOpen()">
				<li class="active"><a href="#notes" data-toggle="tab">Notes</a>
				</li>
				<li > <a href="#notebooks" data-toggle="tab" aria-expanded="true">Notebooks</a>
				</li>
				<li><a href="#tags" data-toggle="tab">Tags</a>
				</li>
				<li><a href="#shared" data-toggle="tab">Shared</a>
				</li>
				<li class="last"><a href="#trash" data-toggle="tab"><i class="fa fa-trash-o"></i></a>
				</li>
			</ul> <!-- ./nav -->
			<div class="tab-content" ng-if="isSideNavOpen()">
				<div class="tab-pane fade in active" id="notes">

					<!-- <div class="panel panel-default"> -->
						<!-- <div class="panel-heading"> -->
								<input ng-model="searchNotes" width="25" type="text" class="form-control" placeholder="Search Notes">
						<!-- </div> -->
						<!-- <div class="panel-body outer-scroll"> -->
						<div class="outer-scroll">
							<div class='list-group' id="side-menu-1">
      							<a ng-click="setCurrentNote(note)"  class="list-group-item" ng-repeat="note in getnotes() | filter:searchNotes | filter: {trash: false} | orderBy: '-lastUpdate'">{{note.subject}}</a>
							</div>
						</div>
					<!-- </div> -->
				</div>
				<div class="tab-pane fade" id="notebooks">
					<!-- <div class="panel panel-default">						 -->
						<!-- <div class="panel-heading"> -->
							<input ng-model="searchNotebooktitle" width="25" type="text" class="form-control" placeholder="Search Notebooks">
						<!-- </div>						 -->
						<!-- <div class="panel-body outer-scroll"> -->
						<div class="outer-scroll">
							<div class="list-group" id="side-menu-2">   						
								
								<div ng-repeat="notebook in getCachedNotebooks() | filter:{title: searchNotebooktitle} | filter: {trash: false} | orderBy: '-date'">

									<!-- <div class="muted">Notebook ID:{{notebook._id}}</div> -->

									<a data-toggle="collapse" ng-href="#{{notebook._id}}" class="list-group-item clearfix" ng-click="setCurrentNotebook(notebook)"> {{notebook.title}} 

										<i data-toggle="modal" data-target="#trashNotebook{{notebook._id}}" data-toggle="tooltip" title="Trash notebook" class="glyphicon glyphicon-minus-sign pull-right"></i> 

										<i data-toggle="modal" data-target="#shareNotebook{{notebook._id}}" class="pull-right glyphicon glyphicon-share"  data-toggle="tooltip" title="Share notebook"></i>

										<!-- <i data-toggle="modal" data-target="#editNotebook{{notebook._id}}" class="pull-right glyphicon glyphicon-cog"  data-toggle="tooltip" title="setting"></i> -->

								    </a>

										<!-- Delete Popup -->
										<div id="trashNotebook{{notebook._id}}" class="modal fade" role="dialog">
										  <div class="modal-dialog">

										    <!-- Share Popup content-->
										    <div class="modal-content">
										      <div class="modal-header">
										        <button type="button" class="close" data-dismiss="modal">&times;</button>
										      </div>
										      <div class="modal-body">

												<div class="input-group" id="delete-notebook-confirmation"> 
											        <h4 class="modal-title">Are you sure you want to delete this notebook?</h4>
													<span ng-click="trashNotebook(notebook)" class="btn btn-danger" data-dismiss="modal">Delete</span> 
													<span class="btn btn-success" data-dismiss="modal">Cancel</span> 
												</div>


										      </div>
										<!--       <div class="modal-footer">
										        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
										      </div> -->
										    </div>
										  </div>
										</div>
										<!-- Closing Delete Popup -->



										<!-- Share Popup -->
										<div id="shareNotebook{{notebook._id}}" class="modal fade" role="dialog">
										  <div class="modal-dialog">

										    <!-- Share Popup content-->
										    <div class="modal-content">
										      <div class="modal-header">
										        <button type="button" class="close" data-dismiss="modal">&times;</button>
										        <h4 class="modal-title">Manage Sharing</h4>
										      </div>
										      <div class="modal-body">

						      				    <form ng-submit="shareNotebook(notebook, shareEmail)">
														<div class="input-group"> 
															<input ng-model="shareEmail" type="text" class="form-control" placeholder="Add friend's email to share or "> 
															<span ng-click="shareNotebook(notebook, shareEmail)" class="input-group-addon btn btn-success" data-dismiss="modal">Share</span> 
															<span ng-click="removeNotebookShare(notebook, shareEmail)" class="input-group-addon btn btn-danger" data-dismiss="modal">Remove Share</span> 
														</div>
												</form>	

												<div class="alert alert-error" role="alert" ng-if="errormessage">{{errormessage}}</div>


										      </div>
										<!--       <div class="modal-footer">
										        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
										      </div> -->
										    </div>
										  </div>
										</div>
										<!-- Closing Popup -->
									<!-- 
										<div id="editNotebook{{notebook._id}}" class="modal fade" role="dialog">
										  <div class="modal-dialog">
										    <div class="modal-content">
										      <div class="modal-header">
										        <button type="button" class="close" data-dismiss="modal">&times;</button>
										      </div>
										      <div class="modal-body">
												<div class="input-group" id="updateNotebook"> 
													<form>
													<input ng-model="shareEmail" type="text" class="form-control" placeholder="{{notebook.title}}">
													<span ng-click="updateNotebook(notebook)" class="btn btn-success" data-dismiss="modal">Save</span> 
													</form>
												</div>
										      </div>
										    </div>
										  </div>
										</div> -->
										<!-- Closing editPopup -->

									<!-- <div class="panel-collapse collapse" id="{{notebook._id}}"> -->
									<div class="collapse" id="{{notebook._id}}">	
										


										<div class="panel-body inner-scroll">
											<div class="list-group">
												<a ng-click="setCurrentNote(oneNote,notebook)" class="list-group-item" ng-repeat="oneNote in notebook.notes| filter:{trash: false} | orderBy: '-lastUpdate'" >{{oneNote.subject}}
												</a>
											</div>
										</div>
									</div>


								</div>
							</div>
						<!-- </div> -->
					</div>
				</div>
				<div class="tab-pane fade" id="tags">
					<!-- <div class="panel panel-default"> -->
						<!-- <div class="panel-heading">My Tags</div> -->
						<!-- <div class="panel-body outer-scroll"> -->
						<div class="outer-scroll">
							<div class="list-group" id="side-menu-3">
								<div ng-repeat="tag in getTagsCache()">
									<a ng-href="#{{tag.tag}}" data-toggle="collapse" class="list-group-item" ng-click="setTag(tag)"><span>{{tag.tag}} </span> <span class="pull-right">{{tag.count}} notes</span></a>
									<div class="panel-collapse collapse" id="{{tag.tag}}">
										<div class="panel-body inner-scroll">
											<div class="list-group">
												<a ng-click="setCurrentNote(note)" class="list-group-item" ng-repeat="note in getnotes() | filterByTag: filters[tag.tag]: note">{{note.subject}}</a>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					<!-- </div> -->
				</div>

				<div class="tab-pane fade" id="shared">
					<!-- <div class="panel panel-default"> -->
						<!-- <div class="panel-heading"> -->
							<input ng-model="searchSharedNotebooktitle" width="25" type="text" class="form-control" placeholder="Search Shared Notebooks">
						<!-- </div> -->
						<!-- <div class="panel-body outer-scroll"> -->
						<div class="outer-scroll">
							<div class="list-group" id="side-menu-4">
								<div ng-repeat="sharednotebook in sharednotebooks | filter:{title: searchSharedNotebooktitle} | filter: {trash: false}">
									<a data-toggle="collapse" ng-href="#{{sharednotebook._id}}" class="list-group-item">{{sharednotebook.title}}</a>
									<div class="panel-collapse collapse" id="{{sharednotebook._id}}">
										<div class="panel-body inner-scroll">
											<div class="list-group">
												<a ng-click="setCurrentNote(oneNote,sharednotebook)" class="list-group-item" ng-repeat="oneNote in sharednotebook.notes">{{oneNote.subject}}
												</a>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					<!-- </div> -->
				</div>

				<div class="tab-pane fade" id="trash">
					<!-- <div class="panel panel-default"> -->
						<!-- <div class="panel-heading"> -->
							<input ng-model="searchNotebooks" width="25" type="text" class="form-control" placeholder="Search Notebooks in Trash">
						<!-- </div> -->
						<!-- <div class="panel-body trash-scroll"> -->
						<div class="trash-scroll">
							<div class="list-group" id="side-menu-5">
								<div ng-repeat="notebook in getCachedNotebooks() | filter:searchNotebooks | filter: {trash: true}" > <!-- check trash logic ? -->
									<!-- <div class="muted">Notebook ID:{{notebook._id}}</div> -->
									<a data-toggle="collapse" ng-href="#trash-{{notebook._id}}" class="list-group-item" ng-click="setCurrentNotebook(notebook)">{{notebook.title}}</a>

									<div class="panel-collapse collapse" id="trash-{{notebook._id}}">
										<button ng-click="deleteNotebook(notebook)" type="button" class="btn btn-danger"  data-toggle="tooltip" title="Permanently delete notebook">delete</button>
										<button ng-click="restoreNotebook(notebook)" type="button" class="btn btn-success"  data-toggle="tooltip" title="Restoring a notebook will also restore all the notes in it">restore</button>

										<div class="panel-body inner-scroll">
											<div class="list-group">
												<a ng-click="setCurrentNote(oneNote,notebook)" class="list-group-item" ng-repeat="oneNote in notebook.notes">{{oneNote.subject}}
												</a>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					<!-- </div> -->
					<div class="panel panel-default">
						<div class="panel-heading">
							<input ng-model="searchNotes" width="25" type="text" class="form-control" placeholder="Search Notes In Trash">

						</div>
							<div class="panel-body inner-scroll">
							<div class='list-group' id="side-menu-1">
									<a class="list-group-item" ng-repeat="note in getnotes() | filter: searchNotes | filter: {trash: true}" ng-click="setCurrentNote(note)">{{note.subject}}</a>
							</div>
						</div>
					</div>			
				</div>
			</div>
		<!-- </div> ./panel body outer -->
	<!-- </div> ./panel panel default outer -->


			<div class="form-inline" ng-if="isSideNavOpen()">
			    	<div class="dropdown">
							<a class="dropdown-toggle" data-toggle="dropdown">
								<button type="button" class="btn btn-success align-right"  data-toggle="tooltip" title="Add a notebook">
									<i class="fa fa-plus"></i><span class="pull-right"> Add Notebook</span>
								</button>
							</a>
							<ul class="dropdown-menu dropdown-messages">
								<li>
									<div class="input-group">
										<form ng-submit="createNotebook(notebookTitle)">
											<input id="notebook" type="text" ng-model="notebookTitle" placeholder="Enter notebook title">
											<button class="btn btn-small btn-default" type="submit">Save</button>
										</form>
									</div>
								</li>
							</ul> <!-- /.dropdown-messages -->
							<!-- <a ng-click="createNotebook()"></a> -->
						</div> <!-- /.dropdown -->
						<div class="dropdown">
							<a class="dropdown-toggle" data-toggle="dropdown" href="#" ng-click="getNotebooks()">
								<button type="button" class="btn btn-success align-right"  data-toggle="tooltip" title="Add a note">
										<i class="fa fa-plus"></i> Add Note
								</button>
							</a>
							<ul class="dropdown-menu dropdown-messages">
								<li ng-repeat="notebook in notebooks">
									<a ng-click="createNote(notebook)">Add a note to "{{notebook.title}}"</a>
								</li>
							</ul> <!-- /.dropdown-messages -->
						</div> <!-- /.dropdown -->
			</div>


</div> 



