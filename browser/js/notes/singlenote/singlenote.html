<div class="alert alert-success" role="alert" ng-if="successmessage">{{successmessage}}</div>
<div class="alert alert-error" role="alert" ng-if="errormessage">{{errormessage}}</div>

<div class="col-sm-12" ng-class="{'col-lg-6 col-md-6' : isSideNavOpen() && !tonic, 'col-lg-11 col-md-11': !isSideNavOpen() && tonic, 'col-lg-7 col-md-7' : !isSideNavOpen() && !tonic, 'col-lg-9 col-md-9' : isSideNavOpen() && tonic }">
<div>isSideNavOpen(): {{isSideNavOpen()}}</div>
	<ul class="nav nav-tabs">
	  <li role="presentation" class="active"><a href="#preview" data-toggle="tab">Preview</a></li>
	  <li role="presentation"><a href="#edit" data-toggle="tab">Edit</a></li>
	</ul>

	<div class="tab-content">
		<div class="tab-pane fade in active" id="preview">
			<h2>Preview Note</h2>
			<div id="markdown-wrapper" class="panel panel-default">
				<div class="panel-body">
					<h2>{{currentNote().subject}}</h2>
					<div marked="currentNote().body">
					</div>
				</div>
			</div>
		</div> <!-- end .tab-pane #preview -->

		<div class="tab-pane fade" id="edit">
			<h2>Edit Note</h2>
			<div class="panel panel-default">
				<div class="panel-heading">
					<label for="notesubject" class="muted">Note title</label> 
					<input ng-model="currentNote().subject" class="form-control" id="notesubject" placeholder="{{currentNote().subject}}">
				</div>

				<div class="panel-body">
					<textarea enter-key="runTonic()" rows="20" id="notebody" ng-model="currentNote().body" placeholder="{{currentNote().body}}" class="form-control" >
					</textarea>
					<p class="muted"><em>To run code, highlight and click "Run Code" or press Ctrl-Enter</em></p>
				</div>

				<div class="panel-body">
					<button class="btn btn-primary" ng-click="save()">Save Changes</button>
					<button ng-if="tonic" class="btn btn-primary" ng-click="runTonic()">Run Code</button>
					<button ng-if="!tonic" class="btn btn-primary" ng-click="closeTonic()">Close Code Window</button>
					<button ng-click="deleteNote(currentNote()._id)" ng-show="!currentNote().trash" type="button" class="btn btn-danger"  data-toggle="tooltip" title="Delete note">
						 Delete Note
					</button>
					<button ng-click="restoreNote(currentNote()._id)" ng-show="currentNote().trash"type="button" class="btn btn-success"  data-toggle="tooltip" title="Restore note">
						Restore Note from Trash
					</button>
					<button ng-click="createGist(currentNote())" type="button" class="btn btn-success"  data-toggle="tooltip" title="Create gist">
						Create a Gist
					</button>
				</div>

				<div class="alert alert-success" role="alert" ng-if="tagsavesuccess">{{tagsavesuccess}}</div>
				<div class="alert alert-danger" role="alert" ng-if="tagsavefailure && !tagsavesuccess">{{tagsavefailure}}</div>
				<!-- <tagfooter></tagfooter> -->
				<div class="panel-footer">
				<div>
					<h4>Tags: </h4>
					<ul class="nav nav-pills">
						<li ng-repeat="tag in currentNote().tags">
							{{tag}} <i class="glyphicon glyphicon-remove" ng-click="removeTag(currentNote(), tag)"></i>
						</li>
					</ul>
				</div>
					
			    <form ng-submit="addTag(currentNote(), tagToAdd)">
						<div class="input-group"> 
							<input ng-model="tagToAdd" type="text" class="form-control" placeholder="Add a tag"> 
							<span ng-click="addTag(currentNote(), tagToAdd)" class="input-group-addon">+</span> 
						</div>
				</form>	
			</div>

			</div>
		</div> <!-- end .tab-pane #edit -->
	</div> <!-- end .tab-content -->

	<div class="panel panel-default">
		<div class="panel-heading">
		<h4 class="panel-title">Note details</h4>
		</div>
		<div class="panel-body muted">
			<div class="row">Note ID: {{currentNote()._id}}</div>
			<div class="row">Size: {{currentNote().size}} kb</div>
			<div class="row">Created: {{currentNote().dateCreated | date : 'short'}}</div>
			<div class="row">Last updated: {{currentNote().lastUpdate | date : 'short'}}</div>
			<div class="row">Trash status: {{currentNote().trash}}</div>
		</div>
	</div>

</div> <!-- end column -->

<div ng-hide="tonic" ng-class="{'col-lg-5 col-md-5 col-sm-5' : !isSideNavOpen(), 'col-lg-3 col-md-3 col-sm-3' : isSideNavOpen()}">
	<div id="my-element"></div>
</div> 

